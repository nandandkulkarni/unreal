# Motion System Project Structure

This document outlines the structure of the Motion System codebase, detailing the purpose and usage of each Python file.

## ðŸ“‚ Core Modules (`motion_system/`)

These modules form the backbone of the motion generation and testing system. They are intended to be imported and used by test scripts.

| File Name | Purpose & Usage |
| :--- | :--- |
| **`motion_planner.py`** | **Core Logic.** Converts high-level motion commands (e.g., `move_by_distance`) into precise keyframe data (location, rotation, time). Used by all test scripts to calculate motion paths. |
| **`keyframe_applier.py`** | **Execution.** Takes the keyframe data generated by the planner and applies it to Actors within an Unreal Level Sequence. |
| **`motion_commands.py`** | **Command Helpers.** Contains helper functions and logic specific to individual commands. Used by the planner to break down complex movements. |
| **`sequence_setup.py`** | **Asset Management.** Handles the creation, configuration, and opening of Level Sequence assets in the Content Browser. |
| **`mannequin_setup.py`** | **Actor Spawning.** Utilities for spawning, configuring, and placing Mannequin actors for motion tests. |
| **`camera_setup.py`** | **Actor Spawning.** Utilities for creating and configuring Cine Camera Actors. |
| **`cleanup.py`** | **Maintenance.** Provides functions to delete old test assets (Sequences) and actors (Mannequins, Cameras) to ensure a clean state for every test run. |
| **`test_motion_system.py`** | **Verification.** Defines the testing framework and assertions (e.g., `assert_position`, `assert_rotation`) used to verify if the actual motion matches the plan. |
| **`debug_db.py`** | **Observability.** Handles connections to the SQLite `motion_debug.db`. Logs every command, keyframe, and test result for post-run analysis. |
| **`logger.py`** | **Logging.** Centralized logging utility to print formatted messages to the Unreal Output Log. |
| **`axis_markers.py`** | **Visual Aid.** Spawns visual axis markers in the level to help users orient themselves during manual inspection. |
| **`visual_aids.py`** | **Visual Aid.** Additional utilities for visual debugging (e.g., drawing paths or debug points). |
| **`hud_setup.py`** | **UI.** Sets up Heads-Up Display elements for test scenarios. |

---

## ðŸ“‚ Tests & Runners (`motion_system/tests/`)

These files are the entry points for running tests. They are split into **Runners** (executed from your command line) and **Scripts** (executed inside Unreal).

### 1. Camera Test
*Basic verification of camera actor movement.*

| File Name | Role | Usage |
| :--- | :--- | :--- |
| **`run_camera_test.py`** | **Runner** | Run from CLI: `python run_camera_test.py`. Sends `camera_test_script.py` to Unreal. |
| **`camera_test_script.py`** | **Script** | The actual test logic running inside Unreal. Imports core modules to move a camera. |

### 2. Integrated Test Suite
*Comprehensive suite covering multiple complex scenarios and detailed logging.*

| File Name | Role | Usage |
| :--- | :--- | :--- |
| **`trigger_integrated_test.py`** | **Runner** | Run from CLI: `python trigger_integrated_test.py`. Sends `run_integrated_test.py` to Unreal. |
| **`run_integrated_test.py`** | **Script** | The full test suite logic running inside Unreal. Generates `troubleshooting_log.txt` in the output folder. |

### 3. Simple Motion Tests
*Lighter suite for quick verification of basic movement commands.*

| File Name | Role | Usage |
| :--- | :--- | :--- |
| **`trigger_motion_tests.py`** | **Runner** | Run from CLI: `python trigger_motion_tests.py`. Sends `run_motion_tests.py` to Unreal. |
| **`run_motion_tests.py`** | **Script** | The test logic running inside Unreal. Focuses on individual command verification. |

### 4. Utilities & Other Tests

| File Name | Purpose |
| :--- | :--- |
| **`query_debug_db.py`** | **Analysis.** A standalone script to query the SQLite database and inspect past test runs/errors. |
| **`test_sqlite_support.py`** | **Environment Check.** A simple test to verify that the standard `sqlite3` library functions correctly within Unreal's Python environment. |
| **`run_and_render_square_path.py`** | **Specific Test.** A dedicated script for running and ensuring the "Square Path" test case renders correctly. |
